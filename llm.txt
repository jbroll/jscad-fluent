# jscad-fluent API

Fluent wrapper for JSCAD. All methods chainable. Import: `import { jf } from 'jscad-fluent'`

## CRITICAL CONSTRAINTS
- Angles: RADIANS (not degrees). Use Math.PI
- Colors: 0-1 range (not 0-255)
- Booleans: all inputs must be same type (all 2D or all 3D)
- Transforms mutate and return `this`
- Measurements return values (not chainable)
- Use clone() to preserve original

## TYPES
```
Vec2 = [number, number]
Vec3 = [number, number, number]
RGB = [number, number, number]        // 0-1
RGBA = [number, number, number, number]  // 0-1
Corners = 'edge' | 'chamfer' | 'round'
```

## 2D PRIMITIVES -> FluentGeom2

jf.rectangle({ size?: Vec2=[2,2], center?: Vec2=[0,0] })
jf.roundedRectangle({ size?: Vec2=[2,2], center?: Vec2=[0,0], roundRadius?: number=0.2, segments?: number=32 })
jf.square({ size?: number=2, center?: Vec2=[0,0] })
jf.circle({ radius?: number=1, center?: Vec2=[0,0], startAngle?: number=0, endAngle?: number=2*PI, segments?: number=32 })
jf.ellipse({ radius?: Vec2=[1,1], center?: Vec2=[0,0], startAngle?: number=0, endAngle?: number=2*PI, segments?: number=32 })
jf.polygon(points: Vec2[])  // counter-clockwise for extrusion
jf.star({ vertices?: number=5, outerRadius?: number=1, innerRadius?: number=0, density?: number=2, startAngle?: number=0, center?: Vec2=[0,0] })

## PATH PRIMITIVES -> FluentPath2

jf.arc({ center?: Vec2=[0,0], radius?: number=1, startAngle?: number=0, endAngle?: number=2*PI, segments?: number=32, makeTangent?: boolean=false })
jf.line(points: Vec2[])

## 3D PRIMITIVES -> FluentGeom3

jf.cube({ size?: number=2, center?: Vec3=[0,0,0] })
jf.sphere({ radius?: number=1, center?: Vec3=[0,0,0], segments?: number=32 })
jf.cylinder({ radius?: number=1, height?: number=2, center?: Vec3=[0,0,0], segments?: number=32 })
jf.cylinderElliptic({ height?: number=2, startRadius?: Vec2=[1,1], endRadius?: Vec2=[1,1], startAngle?: number=0, endAngle?: number=2*PI, center?: Vec3=[0,0,0], segments?: number=32 })
jf.torus({ innerRadius?: number=1, outerRadius?: number=4, innerSegments?: number=32, outerSegments?: number=32, innerRotation?: number=0, outerRotation?: number=2*PI, startAngle?: number=0 })
jf.polyhedron({ points: Vec3[], faces: number[][], colors?: RGBA[], orientation?: 'outward'|'inward'='outward' })

## TRANSFORMS -> this (chainable, all geometry types)

.translate(offset: Vec3)
.translateX(offset: number)
.translateY(offset: number)
.translateZ(offset: number)
.rotate(angles: Vec3)           // radians [rx, ry, rz]
.rotateX(angle: number)         // radians
.rotateY(angle: number)         // radians
.rotateZ(angle: number)         // radians
.scale(factors: Vec3)
.scaleX(factor: number)
.scaleY(factor: number)
.scaleZ(factor: number)
.mirror({ origin?: Vec3=[0,0,0], normal?: Vec3=[0,0,1] })
.mirrorX()                      // across YZ plane
.mirrorY()                      // across XZ plane
.mirrorZ()                      // across XY plane
.center({ axes?: [bool,bool,bool]=[true,true,true], relativeTo?: Vec3=[0,0,0] })
.centerX()
.centerY()
.centerZ()
.transform(matrix: Mat4)

## COLOR -> this

.colorize(color: RGB | RGBA)    // values 0-1

## BOOLEANS -> this (inputs must match geometry type)

.union(others: FluentGeom2[] | FluentGeom3[])
.subtract(others: FluentGeom2[] | FluentGeom3[])
.intersect(others: FluentGeom2[] | FluentGeom3[])

## HULL -> this

.hull()
.hullChain()

## EXPANSION -> this

.expand({ delta?: number=1, corners?: Corners='edge', segments?: number=16 })
.offset({ delta?: number=1, corners?: Corners='edge', segments?: number=16 })  // 2D only

## EXTRUSION (FluentGeom2 -> FluentGeom3)

.extrudeLinear({ height?: number=1, twistAngle?: number=0, twistSteps?: number=1 })
.extrudeRotate({ angle?: number=2*PI, startAngle?: number=0, segments?: number=12, overflow?: 'cap'='cap' })

## MEASUREMENTS -> values (not chainable)

.measureBoundingBox() -> [[minX,minY,minZ], [maxX,maxY,maxZ]]
.measureBoundingSphere() -> [centroid: Vec3, radius: number]
.measureCenter() -> Vec3
.measureDimensions() -> [width, depth, height]
.measureArea() -> number        // 2D only
.measureVolume() -> number      // 3D only

## UTILITY

.clone() -> FluentGeom2 | FluentGeom3
.validate() -> void             // throws if invalid
.toString() -> string
.toPoints() -> Vec2[]           // 2D only
.toOutlines() -> Vec2[][]       // 2D only
.toPolygons() -> {vertices: Vec3[]}[]  // 3D only
.append(geometry) -> FluentGeom2Array | FluentGeom3Array

## EXAMPLE

```typescript
import { jf } from 'jscad-fluent';

const model = jf.rectangle({ size: [50, 30] })
  .subtract([jf.circle({ radius: 8 }).translate([15, 0, 0])])
  .expand({ delta: 2, corners: 'round' })
  .extrudeLinear({ height: 20 })
  .union([jf.cylinder({ radius: 3, height: 25 }).translate([20, 10, 0])])
  .colorize([0.2, 0.2, 0.8]);
```
